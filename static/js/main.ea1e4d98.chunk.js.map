{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["App","useState","source","setSource","img","setImg","result","setResult","getThumbFile","image","file","canvas","document","createElement","width","height","size","ratio","Math","ceil","sqrt","getContext","drawImage","dataURI","byteString","atob","split","mimeString","ab","ArrayBuffer","length","ia","Uint8Array","i","charCodeAt","Blob","type","dataURItoBlob","toDataURL","className","src","alt","style","onClick","form","FormData","append","axios","post","headers","Authorization","then","res","console","log","data","map","el","recognition_words","catch","err","response","statusText","accept","capture","onChange","e","target","files","fReader","FileReader","readAsDataURL","onload","Image","thumbFile","newURL","URL","createObjectURL","handleCapture","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"4OA6GeA,MAzGf,WAAgB,IAAD,EACeC,mBAAS,MADxB,mBACNC,EADM,KACEC,EADF,OAESF,mBAAS,MAFlB,mBAENG,EAFM,KAEDC,EAFC,OAGeJ,mBAAS,MAHxB,mBAGNK,EAHM,KAGEC,EAHF,KAiBb,SAASC,EAAaC,EAAOC,GAC3B,IAAIC,EAASC,SAASC,cAAc,UAEhCC,EAAQL,EAAMK,MACdC,EAASN,EAAMM,OACfC,EAAON,EAAKM,KAEZC,EAAQC,KAAKC,KAAKD,KAAKE,KAAKJ,EALhB,OAKkC,IAQlD,OAPAF,EAAQL,EAAMK,MAAQG,EACtBF,EAASN,EAAMM,OAASE,EACxBN,EAAOG,MAAQA,EACfH,EAAOI,OAASA,EAChBJ,EAAOU,WAAW,MAAMC,UAAUb,EAAO,EAAG,EAAGK,EAAOC,GAxBxD,SAAuBQ,GAKrB,IAJA,IAAIC,EAAaC,KAAKF,EAAQG,MAAM,KAAK,IACrCC,EAAaJ,EAAQG,MAAM,KAAK,GAAGA,MAAM,KAAK,GAAGA,MAAM,KAAK,GAC5DE,EAAK,IAAIC,YAAYL,EAAWM,QAChCC,EAAK,IAAIC,WAAWJ,GACfK,EAAI,EAAGA,EAAIT,EAAWM,OAAQG,IACrCF,EAAGE,GAAKT,EAAWU,WAAWD,GAGhC,OAAO,IAAIE,KAAK,CAACP,GAAK,CAAEQ,KAAMT,IAgBXU,CAAc1B,EAAO2B,UAAU,cAwDpD,OACE,qCACGpC,GACC,qBAAKqC,UAAU,iBAAf,SACE,qBAAKC,IAAKpC,EAAKqC,IAAK,OAAQC,MAAO,CAAE5B,MAAO,YAG/CZ,GAAU,wBAAQyC,QAhCN,WACf,IAAIC,EAAO,IAAIC,SACfD,EAAKE,OAAO,QAAS5C,GAErB6C,IACGC,KAAK,4CAA6CJ,EAAM,CACvDK,QAAS,CACPC,cAAe,2CACf,eAAgB,yBAGnBC,MAAK,SAACC,GACLC,QAAQC,IAAIF,GACZ7C,EACE6C,EAAIG,KAAKjD,OAAOkD,KAAI,SAACC,GACnB,OAAOA,EAAGC,kBAAkB,UAIjCC,OAAM,SAACC,GACNrD,EAAUqD,EAAIC,SAASC,YACvBT,QAAQC,IAAIM,EAAIC,cAWP,oBACX,uBACEE,OAAO,UACP3B,KAAK,OACL4B,QAAQ,cACRC,SAAU,SAACC,GAAD,OA/DM,SAACC,GACrB,GAAIA,EAAOC,OACmB,IAAxBD,EAAOC,MAAMtC,OAAc,CAC7B,IAAMpB,EAAOyD,EAAOC,MAAM,GAE1B,GAAI1D,EAAKM,KAAO,IAAS,CACvB,IAAIqD,EAAU,IAAIC,WAClBD,EAAQE,cAAc7D,GACtB2D,EAAQG,OAAS,SAACN,GAChB,IAAI9D,EAAM,IAAIqE,MACdrE,EAAIoC,IAAM6B,EAAQ/D,OAClBF,EAAIoE,OAAS,WACX,IAAIE,EAAYlE,EAAaJ,EAAKM,GAClCP,EAAUuE,UAIdvE,EAAUO,GAGZ,IAAMiE,EAASC,IAAIC,gBAAgBnE,GACnCL,EAAOsE,IA0CUG,CAAcZ,EAAEC,WAEnC,8BAAM7D,QC5FGyE,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqB9B,MAAK,YAAkD,IAA/C+B,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF7E,SAAS8E,eAAe,SAM1BX,M","file":"static/js/main.ea1e4d98.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport React, { useState } from \"react\";\r\nimport \"./App.css\";\r\n\r\nfunction App() {\r\n  const [source, setSource] = useState(null);\r\n  const [img, setImg] = useState(null);\r\n  const [result, setResult] = useState(null);\r\n\r\n  function dataURItoBlob(dataURI) {\r\n    var byteString = atob(dataURI.split(\",\")[1]);\r\n    var mimeString = dataURI.split(\",\")[0].split(\":\")[1].split(\";\")[0];\r\n    var ab = new ArrayBuffer(byteString.length);\r\n    var ia = new Uint8Array(ab);\r\n    for (var i = 0; i < byteString.length; i++) {\r\n      ia[i] = byteString.charCodeAt(i);\r\n    }\r\n\r\n    return new Blob([ab], { type: mimeString });\r\n  }\r\n\r\n  function getThumbFile(image, file) {\r\n    var canvas = document.createElement(\"canvas\");\r\n    var comp_size = 102400; //100KB (썸네일 작업 결과물 사이즈, 50~200KB 수준으로 압축됨)\r\n    var width = image.width;\r\n    var height = image.height;\r\n    var size = file.size;\r\n\r\n    var ratio = Math.ceil(Math.sqrt(size / comp_size, 2));\r\n    width = image.width / ratio;\r\n    height = image.height / ratio;\r\n    canvas.width = width;\r\n    canvas.height = height;\r\n    canvas.getContext(\"2d\").drawImage(image, 0, 0, width, height);\r\n    var tmpThumbFile = dataURItoBlob(canvas.toDataURL(\"image/png\")); //dataURLtoBlob 부분은 이전 포스팅 참조\r\n\r\n    return tmpThumbFile;\r\n  }\r\n\r\n  const handleCapture = (target) => {\r\n    if (target.files) {\r\n      if (target.files.length !== 0) {\r\n        const file = target.files[0];\r\n\r\n        if (file.size > 2000000) {\r\n          let fReader = new FileReader();\r\n          fReader.readAsDataURL(file);\r\n          fReader.onload = (e) => {\r\n            let img = new Image();\r\n            img.src = fReader.result;\r\n            img.onload = function () {\r\n              let thumbFile = getThumbFile(img, file);\r\n              setSource(thumbFile);\r\n            };\r\n          };\r\n        } else {\r\n          setSource(file);\r\n        }\r\n\r\n        const newURL = URL.createObjectURL(file);\r\n        setImg(newURL);\r\n      }\r\n    }\r\n  };\r\n\r\n  const kakaoOCR = () => {\r\n    let form = new FormData();\r\n    form.append(\"image\", source);\r\n\r\n    axios\r\n      .post(\"https://dapi.kakao.com/v2/vision/text/ocr\", form, {\r\n        headers: {\r\n          Authorization: \"KakaoAK e2e76efe2b926e912bf4d8ed8879f5f2\",\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        setResult(\r\n          res.data.result.map((el) => {\r\n            return el.recognition_words[0];\r\n          })\r\n        );\r\n      })\r\n      .catch((err) => {\r\n        setResult(err.response.statusText);\r\n        console.log(err.response);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {source && (\r\n        <div className=\"imageContainer\">\r\n          <img src={img} alt={\"snap\"} style={{ width: \"100%\" }}></img>\r\n        </div>\r\n      )}\r\n      {source && <button onClick={kakaoOCR}>Detect</button>}\r\n      <input\r\n        accept=\"image/*\"\r\n        type=\"file\"\r\n        capture=\"environment\"\r\n        onChange={(e) => handleCapture(e.target)}\r\n      />\r\n      <div>{result}</div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}